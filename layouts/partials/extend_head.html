{{/* JSON-LD Structured Data */}}
{{ $author := (cond (isset .Site.Params "author") .Site.Params.author "") }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Blog",
      "name": "{{ .Site.Title }}",
      "url": "{{ .Site.BaseURL }}",
      "description": "{{ .Site.Params.description }}",
      "publisher": {
        "@type": "Person",
        "name": "{{ $author }}"
      }
    }{{ if and .IsPage (eq .Section "posts") }},
    {
      "@type": "BlogPosting",
      "headline": "{{ .Title }}",
      "description": "{{ .Summary | plainify | htmlEscape }}",
      "datePublished": "{{ .Date.Format "2006-01-02" }}",
      "dateModified": "{{ .Lastmod.Format "2006-01-02" }}",
      "author": {
        "@type": "Person",
        "name": "{{ with .Params.author }}{{ . }}{{ else }}{{ $author }}{{ end }}"
      },
      "image": "{{ with .Params.cover }}{{ .image | absURL }}{{ else if .Params.images }}{{ (index .Params.images 0) | absURL }}{{ else }}{{ (index .Site.Params.images 0) | absURL }}{{ end }}",
      "url": "{{ .Permalink }}"
    }{{ end }}
  ]
}
</script>
